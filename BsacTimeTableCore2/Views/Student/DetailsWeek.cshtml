@model List<BsacTimeTableCore2.Data.DBModels.Record>

<environment include="Development">
    <link href="~/lib/bootstrap-datepicker/dist/css/bootstrap-datepicker3.css" rel="stylesheet" />
</environment>
<environment exclude="Development">
    <link href="~/lib/bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css" rel="stylesheet" />
</environment>
<form asp-action="DetailsWeek" method="get">
    <input hidden="hidden" name="idgroup" value=@Context.Request.Query["idgroup"]>
    <input hidden="hidden" name="subgroup" value=@Context.Request.Query["subgroup"]>
    <table align="center">
        <tr>
            <td style="padding-top:5px">Выберите неделю:</td>
            <td style="padding-top: 3px">
                <div style="max-width: 200px; padding-left:10px; " id="date" class="input-group date" data-provide="datepicker">
                    <input name="date" type="text" class="form-control">

                    <div class="input-group-addon">
                        <span class="glyphicon glyphicon-th"></span>
                    </div>

                </div>
            </td>
            <td style="padding-top: 3px; padding-left: 10px">
                <input type="submit" value="Показать" class="btn btn-default" />
            </td>
        </tr>
    </table>
</form>
<div>@ViewData["groupName"], @ViewData["subgroup"]-я подгруппа</div>
@{
    var dayOfWeek = 0;
}
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Время</th>
            <th>Предмет</th>
            <th>Преподаватель</th>
            <th>Кабинет</th>
            <th>Тип занятия</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            @if ((int)item.Date.DayOfWeek != dayOfWeek)
            {

                dayOfWeek = (int)item.Date.DayOfWeek;


                <tr>
                    @Html.Partial("_DayName", dayOfWeek)

                </tr>
            }
            <tr>
                @Html.Partial("_TimeTD", item.SubjOrdinalNumber)
                <td>@item.Subject.Name</td>
                <td>@item.Lecturer.Name</td>
                <td>@(item.Classroom.Name + " (к." + item.Classroom.Building + ")")</td>
                <td>@item.SubjectType.Name</td>
            </tr>
        }
    </tbody>
</table>

@section Scripts{
    <environment include="Development">
        <script src="~/lib/bootstrap-datepicker/dist/js/bootstrap-datepicker.js"></script>
        <script src="~/lib/bootstrap-datepicker/dist/locales/bootstrap-datepicker.ru.min.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/lib/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
        <script src="~/lib/bootstrap-datepicker/dist/locales/bootstrap-datepicker.ru.min.js"></script>
    </environment>

    <script>
        $(document).ready(function () {
            $('#date').datepicker({
                format: 'dd/mm/yyyy',
                autoclose: true,
                language: 'ru'
            });
            var date = new Date();
            var n = date.getDay();
            if (n == 0)
                date.setDate(date.getDate() + 1);
            $('#date').datepicker("setDate", date);
        })
    </script>
}